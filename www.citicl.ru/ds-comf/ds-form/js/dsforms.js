function compareVersionjQuery(o){return o=o.split(".",2),nowjQuery=jQuery.fn.jquery.split(".",2),!(parseInt(o[0])!=parseInt(nowjQuery[0])||parseInt(o[1])>parseInt(nowjQuery[1]))}function dsversion(){return"Version 2.3"}function rundsForm(){dsC(document).ready(function(){function formpost(o){if(formid=o.formid,dsC("#"+formid+" img.loadform").hide(),dsC("#"+formid+' input[type="submit"]').show(),delete o.formid,1==o.error){delete o.error,dsC("#"+formid+" .error_form").empty();var s=[];dsC.each(o,function(o,d){-1==dsC.inArray(d,s)&&1!=d&&s.push(d),dsC("#"+formid+' *[name="'+o+'"]').addClass("alert")}),dsC("#"+formid+" *[required]").each(function(){var s=dsC(this);s.hasClass("alert")&&!o[s.attr("name")]&&s.removeClass("alert")});var d='<ul class="error-form">\n';dsC.each(s,function(o,s){d+="<li>"+s+"</li>\n"}),d+="</ul>\n",dsC("#"+formid+" .error_form").append(d),dsC("#"+formid).css("height","auto")}else 0!=o.error&&2!=o.error||(dsC("#"+formid+" form").remove(),dsC("#"+formid+" .scrollform").css("height","auto"),dsC("#"+formid).css("height","auto"),dsC("#"+formid).append(o.error_text))}function addForm(formid){var datajax;if(datajax="formid="+formid,dsconfig=dsC("#"+formid).attr("data-dsconfig")){dsconfig=dsconfig.replace(/'/g,'"');try{eval(JSON.parse(dsconfig)),datajax+="&dsconfig="+dsconfig}catch(e){console.error("JSON array not valid for #"+formid+"!")}}dsC.ajax({url:"/ds-comf/ds-form/formtpl.php",type:"POST",dataType:"text",data:datajax,cache:!1,success:function(o){if("error"!=o&&(dsC("#"+formid).append(o),dsC("#"+formid).hasClass("dspopup-modal")||dsC("#"+formid+" *[autofocus]").focus(),window.FormData||dsC("#"+formid+' *[type="file"]').css("display","none"),buttonheight=dsC("#"+formid+' input[type="submit"]').outerHeight())){var s=dsC("#"+formid+' input[type="submit"]').outerWidth();dsC("#"+formid+' input[type="submit"]').before('<img src="/ds-comf/ds-form/images/loading.gif" class="loadform">'),dsC("#"+formid+" img.loadform").height(buttonheight),dsC("#"+formid+" img.loadform").css("margin-left",(Number(s)-Number(buttonheight))/2),dsC("#"+formid+" img.loadform").css("margin-right",(Number(s)-Number(buttonheight))/2),dsC("#"+formid+" img.loadform, #"+formid+' input[type="submit"]').css("vertical-align","top")}}})}var styleforms=document.createElement("link");styleforms.rel="stylesheet",styleforms.href="/ds-comf/ds-form/formscss.php",document.body.appendChild(styleforms),dsC("body").on("submit",".ds-form form",function(){var o=dsC(this).parents(".ds-form").attr("id");if(dsC("#"+o+' input[type="submit"]').hide(),dsC("#"+o+" img.loadform").show(),window.FormData){var s=new FormData(dsC(this).get(0));s.append("formid",o),dsC.ajax({url:"/ds-comf/ds-form/form.php",type:"POST",contentType:!1,processData:!1,data:s,dataType:"json",success:formpost})}else{var d=dsC(this).serialize();d=d+"&formid="+o,dsC.ajax({type:"POST",url:"/ds-comf/ds-form/form.php",dataType:"json",cache:!1,data:d,success:formpost})}return!1}),dsC("body").on("keyup","form input,form textarea",function(){var o=dsC(this);o.attr("pattern")&&!o.val().match(o.attr("pattern"))?o.addClass("alert"):o.attr("pattern")&&o.hasClass("alert")&&o.removeClass("alert"),!o.attr("pattern")&&o.hasClass("alert")&&o.removeClass("alert")}),dsC("body").on("focusin","form input, form textarea, form select",function(){"#"+dsC(this).parents("form").attr("id");dsC('form input[type="text"], form textarea, form select').each(function(){dsC(this).removeClass("focusout")})}),dsC("body").on("focusout",'form input[type="text"],form textarea, form select',function(){dsC(this).addClass("focusout")}),dsC("*[data-dspopup-id]").each(function(){var o=dsC(this).attr("data-dspopup-id");dsC("#"+o).addClass("dspopup-modal"),(dsconfig=dsC(this).attr("data-dsconfig"))&&dsC("#"+o).attr("data-dsconfig",dsconfig)}),dsC(".ds-form").each(function(){var o=dsC(this).attr("id");addForm(o)}),dsC("body").on("click",".repeatform",function(){var o=dsC(this).parents("div.ds-form").attr("id");dsC(".error-report").remove(),addForm(o)}),dsC("*[data-dspopup-id]").on("click",function(o){o.preventDefault();var s=dsC(this).attr("data-dspopup-id"),d=dsC("#"+s).innerWidth(),t=dsC("#"+s).innerHeight(),i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;if(t+20>=i){var e=20,r=0,a=dsC("#"+s).html(),n=t-dsC("#"+s).height();dsC("#"+s).width(dsC("#"+s).width()+20),dsC("#"+s).html('<div class="scrollform">\n'+a+"</div>"),t=i-40-n,dsC(".scrollform").css("height",t-n),dsC(".scrollform").css("overflow-y","scroll"),dsC("#"+s).css("overflow","hidden")}else{var e=Math.round(i/2),r=-Math.round(t/2);t=dsC("#"+s).height()}dsC("#"+s).append('<div class="close-dspopup-modal"></div>'),setTimeout(function(){dsC("#"+s+" *[autofocus]").focus()},1e3),dsC("#"+s).dspopup(dsC(this).data()),dsC("#"+s).css({top:e+"px",left:"50% !important","margin-left":-Math.round(d/2)+"px","margin-top":r+"px",height:t})}),dsC.fn.dspopup=function(o){var s={animation:"fade",animationspeed:300,closeonbackgroundclick:!0,dismissmodalclass:"close-dspopup-modal"},o=dsC.extend({},s,o);return this.each(function(){function s(){r=!1}function d(){r=!0}var t=dsC(this),i=parseInt(t.css("top")),e=t.height()+i,r=!1,a=dsC(".dspopup-modal-bg");0==a.length&&(a=dsC('<div class="dspopup-modal-bg" />').insertAfter(t)),t.bind("dspopup:open",function(){a.unbind("click.modalEvent"),dsC("."+o.dismissmodalclass).unbind("click.modalEvent"),r||(d(),"fadeAndPop"==o.animation&&(t.css({top:dsC(document).scrollTop()-e,opacity:0,visibility:"visible"}),a.fadeIn(o.animationspeed/2),t.delay(o.animationspeed/2).animate({top:dsC(document).scrollTop()+i+"px",opacity:1},o.animationspeed,s())),"fade"==o.animation&&(t.css({opacity:0,visibility:"visible",top:dsC(document).scrollTop()+i}),a.fadeIn(o.animationspeed/2),t.delay(o.animationspeed/2).animate({opacity:1},o.animationspeed,s())),"none"==o.animation&&(t.css({visibility:"visible",top:dsC(document).scrollTop()+i}),a.css({display:"block"}),s())),t.unbind("dspopup:open")}),t.bind("dspopup:close",function(){r||(d(),"fadeAndPop"==o.animation&&(a.delay(o.animationspeed).fadeOut(o.animationspeed),t.animate({top:dsC(document).scrollTop()-e+"px",opacity:0},o.animationspeed/2,function(){t.css({top:i,opacity:1,visibility:"hidden"}),s()})),"fade"==o.animation&&(a.delay(o.animationspeed).fadeOut(o.animationspeed),t.animate({opacity:0},o.animationspeed,function(){t.css({opacity:1,visibility:"hidden",top:i}),s()})),"none"==o.animation&&(t.css({visibility:"hidden",top:i}),a.css({display:"none"}))),t.unbind("dspopup:close")}),t.trigger("dspopup:open");dsC("."+o.dismissmodalclass).bind("click.modalEvent",function(){t.trigger("dspopup:close")});o.closeonbackgroundclick&&(a.css({cursor:"pointer"}),a.bind("click.modalEvent",function(){t.trigger("dspopup:close")})),dsC("body").keyup(function(o){27===o.which&&t.trigger("dspopup:close")})})}})}window.dsC?rundsForm():window.jQuery&&!compareVersionjQuery("1.7")||!window.jQuery?console.error("Version jQuery < 1.7 or jQuery not found!"):(dsC=window.jQuery,rundsForm());